<!DOCTYPE html>
<!-- saved from url=(0098)file:///C:/Users/Smartworking/.gemini/antigravity/scratch/Vietri-BoardGame-main/editor_vietri.html -->
<html lang="it" style="--vietri-blue: #0047AB;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Vietri Card Editor</title>
    <!-- <script src="./Vietri Card Editor_files/saved_resource"></script> -->
    <style>
        :root {
            --vietri-blue: #0047AB;
            --vietri-yellow: #FFD700;
        }

        body {
            background-color: #f0f8ff;
            font-family: 'Segoe UI', sans-serif;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        /* Ceramic Style */
        .maiolica-border {
            border: 4px solid var(--vietri-blue);
            background-image: linear-gradient(45deg, var(--vietri-blue) 25%, transparent 25%, transparent 75%, var(--vietri-blue) 75%, var(--vietri-blue)),
                linear-gradient(45deg, var(--vietri-blue) 25%, transparent 25%, transparent 75%, var(--vietri-blue) 75%, var(--vietri-blue));
            background-position: 0 0, 5px 5px;
            background-size: 10px 10px;
            padding: 8px;
            background-color: white;
        }

        /* Card Container */
        .card-white-border {
            background: white;
            padding: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            display: inline-block;
            border-radius: 4px;
        }

        /* Inner Content Area */
        .card-inner-box {
            width: 500px;
            /* Horizontal Layout Fixed Width */
            height: 300px;
            /* Fixed Height */
            background: #fff;
            border: 2px solid var(--vietri-yellow);
            display: flex;
        }

        .section-left {
            width: 35%;
            border-right: 2px dashed #e5e7eb;
            display: flex;
            flex-direction: column;
            padding: 10px;
            background-color: #fffbf0;
            /* Very light yellow tint */
        }

        .section-right {
            width: 65%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fff;
            padding: 0;
            position: relative;
        }

        .artwork-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
        }

        /* Cube Styles */
        .cube {
            width: 24px;
            height: 24px;
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.4), 1px 2px 2px rgba(0, 0, 0, 0.2);
            display: inline-block;
            border-radius: 3px;
        }

        .cube-gray {
            background: #9ca3af;
        }

        .cube-red {
            background: #ef4444;
        }

        .cube-blue {
            background: #3b82f6;
        }

        .cube-yellow {
            background: #eab308;
        }

        .cube-orange {
            background: #f97316;
        }

        .cube-green {
            background: #22c55e;
        }

        .cube-purple {
            background: #a855f7;
        }

        .req-row {
            display: flex;
            align-items: center;
            margin-bottom: 2px;
            font-weight: bold;
            font-size: 1.1rem;
            color: #374151;
        }

        .coin-reward {
            font-size: 1.8rem;
            font-weight: 800;
            color: #ca8a04;
            text-shadow: 1px 1px 0 rgba(255, 255, 255, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        /* PRINT STYLES */
        @media print {
            body * {
                visibility: hidden;
            }

            #print-area,
            #print-area * {
                visibility: visible;
            }

            #print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                display: grid !important;
                grid-template-columns: repeat(3, 88mm);
                grid-auto-rows: 63mm;
                gap: 5mm;
                /* Space between cards */
                padding: 10mm;
                background: white;
                justify-content: center;
                /* Center grid on page */
            }

            @page {
                size: A4 landscape;
                margin: 0;
                /* Manual padding in #print-area */
            }

            /* Scale cards for print */
            .card-white-border {
                box-shadow: none;
                padding: 0;
                width: 88mm;
                height: 63mm;
                border: 1px dotted #ccc;
                /* Cut guide */
                display: flex;
                align-items: center;
                justify-content: center;
                overflow: hidden;
                background: white;
            }

            /* Scale the inner content (orig ~530px width) to fit 88mm (~332px) */
            /* 332 / 530 ~= 0.62 */
            .card-white-border .maiolica-border {
                transform: scale(0.62);
                transform-origin: center;
                /* Remove outer margin/padding impact from scaling */
                margin: 0;
            }
        }
    </style>
    <style>
        *,
        ::before,
        ::after {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        ::backdrop {
            --tw-border-spacing-x: 0;
            --tw-border-spacing-y: 0;
            --tw-translate-x: 0;
            --tw-translate-y: 0;
            --tw-rotate: 0;
            --tw-skew-x: 0;
            --tw-skew-y: 0;
            --tw-scale-x: 1;
            --tw-scale-y: 1;
            --tw-pan-x: ;
            --tw-pan-y: ;
            --tw-pinch-zoom: ;
            --tw-scroll-snap-strictness: proximity;
            --tw-gradient-from-position: ;
            --tw-gradient-via-position: ;
            --tw-gradient-to-position: ;
            --tw-ordinal: ;
            --tw-slashed-zero: ;
            --tw-numeric-figure: ;
            --tw-numeric-spacing: ;
            --tw-numeric-fraction: ;
            --tw-ring-inset: ;
            --tw-ring-offset-width: 0px;
            --tw-ring-offset-color: #fff;
            --tw-ring-color: rgb(59 130 246 / 0.5);
            --tw-ring-offset-shadow: 0 0 #0000;
            --tw-ring-shadow: 0 0 #0000;
            --tw-shadow: 0 0 #0000;
            --tw-shadow-colored: 0 0 #0000;
            --tw-blur: ;
            --tw-brightness: ;
            --tw-contrast: ;
            --tw-grayscale: ;
            --tw-hue-rotate: ;
            --tw-invert: ;
            --tw-saturate: ;
            --tw-sepia: ;
            --tw-drop-shadow: ;
            --tw-backdrop-blur: ;
            --tw-backdrop-brightness: ;
            --tw-backdrop-contrast: ;
            --tw-backdrop-grayscale: ;
            --tw-backdrop-hue-rotate: ;
            --tw-backdrop-invert: ;
            --tw-backdrop-opacity: ;
            --tw-backdrop-saturate: ;
            --tw-backdrop-sepia: ;
            --tw-contain-size: ;
            --tw-contain-layout: ;
            --tw-contain-paint: ;
            --tw-contain-style:
        }

        /* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */
        *,
        ::after,
        ::before {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb
        }

        ::after,
        ::before {
            --tw-content: ''
        }

        :host,
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            -moz-tab-size: 4;
            tab-size: 4;
            font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            font-feature-settings: normal;
            font-variation-settings: normal;
            -webkit-tap-highlight-color: transparent
        }

        body {
            margin: 0;
            line-height: inherit
        }

        hr {
            height: 0;
            color: inherit;
            border-top-width: 1px
        }

        abbr:where([title]) {
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-size: inherit;
            font-weight: inherit
        }

        a {
            color: inherit;
            text-decoration: inherit
        }

        b,
        strong {
            font-weight: bolder
        }

        code,
        kbd,
        pre,
        samp {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-feature-settings: normal;
            font-variation-settings: normal;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        table {
            text-indent: 0;
            border-color: inherit;
            border-collapse: collapse
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font-family: inherit;
            font-feature-settings: inherit;
            font-variation-settings: inherit;
            font-size: 100%;
            font-weight: inherit;
            line-height: inherit;
            letter-spacing: inherit;
            color: inherit;
            margin: 0;
            padding: 0
        }

        button,
        select {
            text-transform: none
        }

        button,
        input:where([type=button]),
        input:where([type=reset]),
        input:where([type=submit]) {
            -webkit-appearance: button;
            background-color: transparent;
            background-image: none
        }

        :-moz-focusring {
            outline: auto
        }

        :-moz-ui-invalid {
            box-shadow: none
        }

        progress {
            vertical-align: baseline
        }

        ::-webkit-inner-spin-button,
        ::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

        ::-webkit-search-decoration {
            -webkit-appearance: none
        }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        summary {
            display: list-item
        }

        blockquote,
        dd,
        dl,
        figure,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        hr,
        p,
        pre {
            margin: 0
        }

        fieldset {
            margin: 0;
            padding: 0
        }

        legend {
            padding: 0
        }

        menu,
        ol,
        ul {
            list-style: none;
            margin: 0;
            padding: 0
        }

        dialog {
            padding: 0
        }

        textarea {
            resize: vertical
        }

        input::placeholder,
        textarea::placeholder {
            opacity: 1;
            color: #9ca3af
        }

        [role=button],
        button {
            cursor: pointer
        }

        :disabled {
            cursor: default
        }

        audio,
        canvas,
        embed,
        iframe,
        img,
        object,
        svg,
        video {
            display: block;
            vertical-align: middle
        }

        img,
        video {
            max-width: 100%;
            height: auto
        }

        [hidden]:where(:not([hidden=until-found])) {
            display: none
        }

        .absolute {
            position: absolute
        }

        .relative {
            position: relative
        }

        .inset-0 {
            inset: 0px
        }

        .bottom-6 {
            bottom: 1.5rem
        }

        .right-6 {
            right: 1.5rem
        }

        .z-10 {
            z-index: 10
        }

        .mx-2 {
            margin-left: 0.5rem;
            margin-right: 0.5rem
        }

        .mb-2 {
            margin-bottom: 0.5rem
        }

        .mb-3 {
            margin-bottom: 0.75rem
        }

        .mb-4 {
            margin-bottom: 1rem
        }

        .mt-1 {
            margin-top: 0.25rem
        }

        .mt-3 {
            margin-top: 0.75rem
        }

        .mt-4 {
            margin-top: 1rem
        }

        .mt-8 {
            margin-top: 2rem
        }

        .mb-0 {
            margin-bottom: 0px
        }

        .ml-1 {
            margin-left: 0.25rem
        }

        .mt-auto {
            margin-top: auto
        }

        .block {
            display: block
        }

        .flex {
            display: flex
        }

        .hidden {
            display: none
        }

        .h-10 {
            height: 2.5rem
        }

        .h-5 {
            height: 1.25rem
        }

        .h-screen {
            height: 100vh
        }

        .h-6 {
            height: 1.5rem
        }

        .max-h-40 {
            max-height: 10rem
        }

        .w-1\/3 {
            width: 33.333333%
        }

        .w-16 {
            width: 4rem
        }

        .w-2\/3 {
            width: 66.666667%
        }

        .w-20 {
            width: 5rem
        }

        .w-5 {
            width: 1.25rem
        }

        .w-full {
            width: 100%
        }

        .w-12 {
            width: 3rem
        }

        .w-6 {
            width: 1.5rem
        }

        .flex-1 {
            flex: 1 1 0%
        }

        .flex-grow {
            flex-grow: 1
        }

        .transform {
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .cursor-pointer {
            cursor: pointer
        }

        .flex-col {
            flex-direction: column
        }

        .items-center {
            align-items: center
        }

        .justify-center {
            justify-content: center
        }

        .justify-between {
            justify-content: space-between
        }

        .gap-1 {
            gap: 0.25rem
        }

        .gap-2 {
            gap: 0.5rem
        }

        .gap-6 {
            gap: 1.5rem
        }

        .space-y-2> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(0.5rem * var(--tw-space-y-reverse))
        }

        .space-y-6> :not([hidden])~ :not([hidden]) {
            --tw-space-y-reverse: 0;
            margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));
            margin-bottom: calc(1.5rem * var(--tw-space-y-reverse))
        }

        .overflow-hidden {
            overflow: hidden
        }

        .overflow-y-auto {
            overflow-y: auto
        }

        .rounded {
            border-radius: 0.25rem
        }

        .rounded-lg {
            border-radius: 0.5rem
        }

        .rounded-full {
            border-radius: 9999px
        }

        .rounded-sm {
            border-radius: 0.125rem
        }

        .border {
            border-width: 1px
        }

        .border-b {
            border-bottom-width: 1px
        }

        .border-r {
            border-right-width: 1px
        }

        .border-t {
            border-top-width: 1px
        }

        .border-t-2 {
            border-top-width: 2px
        }

        .border-dashed {
            border-style: dashed
        }

        .border-dotted {
            border-style: dotted
        }

        .border-blue-200 {
            --tw-border-opacity: 1;
            border-color: rgb(191 219 254 / var(--tw-border-opacity, 1))
        }

        .border-gray-100 {
            --tw-border-opacity: 1;
            border-color: rgb(243 244 246 / var(--tw-border-opacity, 1))
        }

        .border-gray-200 {
            --tw-border-opacity: 1;
            border-color: rgb(229 231 235 / var(--tw-border-opacity, 1))
        }

        .border-yellow-100 {
            --tw-border-opacity: 1;
            border-color: rgb(254 249 195 / var(--tw-border-opacity, 1))
        }

        .border-yellow-300 {
            --tw-border-opacity: 1;
            border-color: rgb(253 224 71 / var(--tw-border-opacity, 1))
        }

        .border-gray-300 {
            --tw-border-opacity: 1;
            border-color: rgb(209 213 219 / var(--tw-border-opacity, 1))
        }

        .bg-blue-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(219 234 254 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(239 246 255 / var(--tw-bg-opacity, 1))
        }

        .bg-blue-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(37 99 235 / var(--tw-bg-opacity, 1))
        }

        .bg-gray-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(243 244 246 / var(--tw-bg-opacity, 1))
        }

        .bg-gray-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1))
        }

        .bg-gray-800 {
            --tw-bg-opacity: 1;
            background-color: rgb(31 41 55 / var(--tw-bg-opacity, 1))
        }

        .bg-green-600 {
            --tw-bg-opacity: 1;
            background-color: rgb(22 163 74 / var(--tw-bg-opacity, 1))
        }

        .bg-slate-100 {
            --tw-bg-opacity: 1;
            background-color: rgb(241 245 249 / var(--tw-bg-opacity, 1))
        }

        .bg-white {
            --tw-bg-opacity: 1;
            background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1))
        }

        .bg-yellow-50 {
            --tw-bg-opacity: 1;
            background-color: rgb(254 252 232 / var(--tw-bg-opacity, 1))
        }

        .bg-\[radial-gradient\(\#e5e7eb_1px\2c transparent_1px\)\] {
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px)
        }

        .p-1 {
            padding: 0.25rem
        }

        .p-2 {
            padding: 0.5rem
        }

        .p-4 {
            padding: 1rem
        }

        .p-6 {
            padding: 1.5rem
        }

        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem
        }

        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem
        }

        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem
        }

        .py-2 {
            padding-top: 0.5rem;
            padding-bottom: 0.5rem
        }

        .py-3 {
            padding-top: 0.75rem;
            padding-bottom: 0.75rem
        }

        .pb-4 {
            padding-bottom: 1rem
        }

        .pt-2 {
            padding-top: 0.5rem
        }

        .pt-4 {
            padding-top: 1rem
        }

        .pl-2 {
            padding-left: 0.5rem
        }

        .pt-3 {
            padding-top: 0.75rem
        }

        .text-center {
            text-align: center
        }

        .text-right {
            text-align: right
        }

        .font-mono {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace
        }

        .font-serif {
            font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif
        }

        .text-3xl {
            font-size: 1.875rem;
            line-height: 2.25rem
        }

        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem
        }

        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem
        }

        .text-xl {
            font-size: 1.25rem;
            line-height: 1.75rem
        }

        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem
        }

        .text-2xl {
            font-size: 1.5rem;
            line-height: 2rem
        }

        .text-\[10px\] {
            font-size: 10px
        }

        .font-bold {
            font-weight: 700
        }

        .font-medium {
            font-weight: 500
        }

        .uppercase {
            text-transform: uppercase
        }

        .capitalize {
            text-transform: capitalize
        }

        .italic {
            font-style: italic
        }

        .leading-none {
            line-height: 1
        }

        .tracking-wide {
            letter-spacing: 0.025em
        }

        .tracking-wider {
            letter-spacing: 0.05em
        }

        .tracking-widest {
            letter-spacing: 0.1em
        }

        .tracking-tight {
            letter-spacing: -0.025em
        }

        .text-blue-800 {
            --tw-text-opacity: 1;
            color: rgb(30 64 175 / var(--tw-text-opacity, 1))
        }

        .text-blue-900 {
            --tw-text-opacity: 1;
            color: rgb(30 58 138 / var(--tw-text-opacity, 1))
        }

        .text-gray-400 {
            --tw-text-opacity: 1;
            color: rgb(156 163 175 / var(--tw-text-opacity, 1))
        }

        .text-gray-700 {
            --tw-text-opacity: 1;
            color: rgb(55 65 81 / var(--tw-text-opacity, 1))
        }

        .text-white {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .text-yellow-600 {
            --tw-text-opacity: 1;
            color: rgb(202 138 4 / var(--tw-text-opacity, 1))
        }

        .text-yellow-700 {
            --tw-text-opacity: 1;
            color: rgb(161 98 7 / var(--tw-text-opacity, 1))
        }

        .text-yellow-800 {
            --tw-text-opacity: 1;
            color: rgb(133 77 14 / var(--tw-text-opacity, 1))
        }

        .opacity-\[0\.03\] {
            opacity: 0.03
        }

        .shadow {
            --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-lg {
            --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .shadow-sm {
            --tw-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .outline-none {
            outline: 2px solid transparent;
            outline-offset: 2px
        }

        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .transition-colors {
            transition-property: color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
            transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms
        }

        .duration-300 {
            transition-duration: 300ms
        }

        .\[background-size\:16px_16px\] {
            background-size: 16px 16px
        }

        .hover\:scale-\[1\.02\]:hover {
            --tw-scale-x: 1.02;
            --tw-scale-y: 1.02;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }

        .hover\:border-blue-300:hover {
            --tw-border-opacity: 1;
            border-color: rgb(147 197 253 / var(--tw-border-opacity, 1))
        }

        .hover\:bg-black:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(0 0 0 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-blue-200:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(191 219 254 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-blue-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(29 78 216 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-green-700:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(21 128 61 / var(--tw-bg-opacity, 1))
        }

        .hover\:bg-red-500:hover {
            --tw-bg-opacity: 1;
            background-color: rgb(239 68 68 / var(--tw-bg-opacity, 1))
        }

        .hover\:text-white:hover {
            --tw-text-opacity: 1;
            color: rgb(255 255 255 / var(--tw-text-opacity, 1))
        }

        .hover\:shadow-2xl:hover {
            --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);
            --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);
            box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)
        }

        .focus\:ring-2:focus {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)
        }

        .focus\:ring-blue-500:focus {
            --tw-ring-opacity: 1;
            --tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))
        }

        .active\:scale-95:active {
            --tw-scale-x: .95;
            --tw-scale-y: .95;
            transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))
        }
    </style>
</head>

<body class="overflow-hidden" id="main-ui">
    <div class="flex h-screen">
        <!-- CONTROLS PANEL -->
        <div class="w-1/3 p-6 bg-white border-r border-gray-200 overflow-y-auto shadow-lg z-10 flex flex-col gap-6">
            <div class="flex items-center justify-between border-b pb-4">
                <div class="flex items-center gap-2">
                    <div class="text-3xl">üè∫</div>
                    <div>
                        <h1 class="text-xl font-bold text-blue-900 font-serif leading-none">Vietri</h1>
                        <h2 class="text-sm text-yellow-600 font-bold uppercase tracking-wide">Card Editor</h2>
                    </div>
                </div>
                <a href="index.html"
                    class="bg-blue-100 text-blue-800 px-3 py-1 rounded hover:bg-blue-200 text-sm font-bold flex items-center gap-1 transition-colors">
                    <span>üè†</span> Home
                </a>
            </div>

            <!-- LIBRARY ACTIONS -->
            <div class="bg-blue-50 p-4 rounded-lg border border-blue-200 shadow-sm">
                <h3 class="font-bold text-blue-800 text-sm uppercase tracking-wider mb-3">Libreria &amp; Stampa</h3>
                <div class="flex gap-2 mb-3">
                    <button onclick="addToLibrary()"
                        class="flex-1 bg-green-600 text-white py-2 rounded font-bold text-sm hover:bg-green-700 shadow flex items-center justify-center gap-1">
                        <span>‚ûï</span> Aggiungi
                    </button>
                    <button onclick="printLibrary()"
                        class="flex-1 bg-gray-800 text-white py-2 rounded font-bold text-sm hover:bg-black shadow flex items-center justify-center gap-1">
                        <span>üñ®Ô∏è</span> Stampa (6/pag)
                    </button>
                </div>
                <!-- Library List -->
                <div id="library-list"
                    class="space-y-2 max-h-40 overflow-y-auto bg-white p-2 rounded border border-gray-200 text-sm">
                    <p class="text-gray-400 text-center text-xs italic">Nessuna carta salvata</p>
                </div>
            </div>

            <!-- EDITOR CONTROLS -->
            <div class="space-y-6">
                <!-- Image Selector -->
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-100">
                    <label class="block font-bold text-gray-700 mb-2 text-sm uppercase tracking-wider">Immagine Opera
                        (.png)</label>
                    <select id="img-select"
                        class="w-full p-2 border rounded bg-white shadow-sm mb-2 focus:ring-2 focus:ring-blue-500 outline-none">
                        <!-- Dynamic options will be injected here -->
                    </select>
                    <input type="text" id="custom-img" placeholder="Nome file custom..."
                        class="w-full p-2 border rounded text-sm bg-white">
                    <p class="text-xs text-gray-400 mt-1">Usa file presenti nella cartella del progetto.</p>

                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <label class="block font-bold text-gray-700 mb-2 text-sm uppercase tracking-wider">Colore Bordo
                            Ceramica</label>
                        <div class="flex items-center gap-2">
                            <input type="color" id="border-color-picker" value="#0047AB"
                                class="h-10 w-full p-1 border rounded cursor-pointer">
                        </div>
                    </div>
                </div>

                <!-- Requirements -->
                <div>
                    <h3 class="font-bold text-gray-700 text-sm uppercase tracking-wider mb-3">Materiali Richiesti</h3>

                    <!-- Fixed Grey -->
                    <div class="flex items-center justify-between mb-2 bg-gray-100 p-2 rounded border border-gray-200">
                        <div class="flex items-center gap-2">
                            <div class="cube cube-gray"></div>
                            <span class="font-bold text-gray-700 text-sm">Base Argilla (1¬∞)</span>
                        </div>
                        <input type="number" id="req-gray" value="1" min="1"
                            class="w-16 p-1 border rounded text-center font-bold">
                    </div>

                    <!-- Dynamic Colors -->
                    <div id="color-reqs-container" class="space-y-2">
                        <div
                            class="flex items-center justify-between mb-2 bg-white p-2 border rounded shadow-sm hover:border-blue-300 transition-colors">
                            <div class="flex items-center gap-2">
                                <div class="cube cube-red"></div>
                                <span class="capitalize text-sm font-medium text-gray-700">red</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">Qt.</span>
                                <input type="number" value="2" min="1"
                                    class="w-12 p-1 border rounded text-center text-sm font-bold"
                                    onchange="updateColorCount(0, this.value)">
                                <button onclick="removeColor(0)"
                                    class="w-6 h-6 flex items-center justify-center rounded-full text-gray-400 hover:text-white hover:bg-red-500 font-bold transition-all ml-1">√ó</button>
                            </div>
                        </div>
                        <div
                            class="flex items-center justify-between mb-2 bg-white p-2 border rounded shadow-sm hover:border-blue-300 transition-colors">
                            <div class="flex items-center gap-2">
                                <div class="cube cube-yellow"></div>
                                <span class="capitalize text-sm font-medium text-gray-700">yellow</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="text-xs text-gray-400">Qt.</span>
                                <input type="number" value="1" min="1"
                                    class="w-12 p-1 border rounded text-center text-sm font-bold"
                                    onchange="updateColorCount(1, this.value)">
                                <button onclick="removeColor(1)"
                                    class="w-6 h-6 flex items-center justify-center rounded-full text-gray-400 hover:text-white hover:bg-red-500 font-bold transition-all ml-1">√ó</button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3 flex gap-2 pt-2 border-t border-dashed">
                        <select id="add-color-select" class="p-2 border rounded text-sm flex-grow bg-white">
                            <option value="red">Rosso</option>
                            <option value="blue">Blu</option>
                            <option value="yellow">Giallo</option>
                            <option value="green">Verde</option>
                            <option value="orange">Arancio</option>
                            <option value="purple">Viola</option>
                        </select>
                        <button onclick="addColorReq()"
                            class="bg-blue-600 text-white px-4 py-1 rounded text-sm font-bold hover:bg-blue-700 shadow-sm transition-colors">+
                            AGGIUNGI</button>
                    </div>
                </div>

                <!-- Reward -->
                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                    <h3 class="font-bold text-yellow-800 text-sm uppercase tracking-wider mb-3">Ricompensa Finale</h3>
                    <div class="flex items-center justify-between">
                        <span class="font-bold text-yellow-600 flex items-center gap-2 text-lg">üí∞ Monete</span>
                        <input type="number" id="reward-coins" value="3" min="0"
                            class="w-20 p-2 border border-yellow-300 rounded text-center font-bold text-xl text-yellow-700 bg-white">
                    </div>
                </div>

                <div class="mt-8">
                    <button onclick="exportConfig()"
                        class="w-full bg-gray-800 text-white py-3 rounded-lg font-bold hover:bg-black shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z">
                            </path>
                        </svg>
                        Copia JSON Config
                    </button>
                </div>
            </div>
        </div>

        <!-- PREVIEW PANEL -->
        <div
            class="w-2/3 bg-slate-100 flex flex-col items-center justify-center relative bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]">

            <div class="mb-4 text-gray-400 font-mono text-sm uppercase tracking-widest">Anteprima 1:1</div>

            <div id="preview-container">
                <div
                    class="card-white-border transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl">
                    <div class="maiolica-border"
                        style="border-color: #0047AB; background-image: linear-gradient(45deg, #0047AB 25%, transparent 25%, transparent 75%, #0047AB 75%, #0047AB), linear-gradient(45deg, #0047AB 25%, transparent 25%, transparent 75%, #0047AB 75%, #0047AB);">
                        <div class="card-inner-box">
                            <!-- LEFT -->
                            <div class="section-left">
                                <div
                                    class="text-xs font-bold text-gray-400 uppercase tracking-tight mb-2 text-center w-full">
                                    Richiesto</div>
                                <div class="flex flex-col gap-1 w-full pl-2">

                                    <div class="req-row">
                                        <div class="cube cube-gray"></div>
                                        <span class="text-xs text-gray-400 mx-2">x</span>
                                        <span class="text-xl font-bold font-mono">1</span>
                                    </div>
                                    <div class="req-row">
                                        <div class="cube cube-red"></div>
                                        <span class="text-xs text-gray-400 mx-2">x</span>
                                        <span class="text-xl font-bold font-mono">2</span>
                                    </div>
                                    <div class="req-row">
                                        <div class="cube cube-yellow"></div>
                                        <span class="text-xs text-gray-400 mx-2">x</span>
                                        <span class="text-xl font-bold font-mono">1</span>
                                    </div>
                                </div>
                                <div class="mt-auto pt-3 border-t-2 border-dotted border-gray-300 w-full text-center">
                                    <div class="text-[10px] uppercase text-gray-400 font-bold mb-0">Valore</div>
                                    <div class="coin-reward">
                                        <span>3</span> <span class="text-2xl">üí∞</span>
                                    </div>
                                </div>
                            </div>
                            <!-- RIGHT -->
                            <div class="section-right">
                                <div class="absolute inset-0 opacity-[0.03]"
                                    style="background-image: url(&#39;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSIjMDA0N0FCIj48cGF0aCBkPSJNMjAgMEwyMCA0ME0wIDIwTDQwIDIweiIvPjwvc3ZnPg==&#39;)">
                                </div>
                                <img src="./Vietri Card Editor_files/preview.png"
                                    class="artwork-img relative z-10 rounded-sm"
                                    onerror="this.onerror=null; this.src=&#39;https://via.placeholder.com/300?text=IMG+NOT+FOUND&#39;;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="absolute bottom-6 right-6 text-gray-400 text-xs text-right">
                Vietri Card Editor v1.2<br>
                Cards in Library: <span id="lib-count">0</span>
            </div>

        </div>
    </div>

    <!-- PRINT AREA (Hidden normally) -->
    <div id="print-area" class="hidden"></div>

    <script type="module">
        // Dynamic Image Loading via Vite
        const opereImages = import.meta.glob('./opere/*.png', { eager: true, query: '?url', import: 'default' });

        // Logic to populate the select options
        const select = document.getElementById('img-select');
        select.innerHTML = '<option value="preview.png">preview.png</option>'; // Default option

        Object.keys(opereImages).sort().forEach(path => {
            const url = opereImages[path];
            const fileName = path.split('/').pop();
            const option = document.createElement('option');
            option.value = url;
            option.textContent = fileName;
            select.appendChild(option);
        });

        // Expose function to be available in global scope if needed by legacy calls, 
        // though strictly with this new structure we might not need it if we rely on pure event listeners,
        // but let's keep it safe.
    </script>
    <script>
        // State
        const state = {
            id: Date.now(),
            img: 'preview.png',
            gray: 1,
            colors: [{ type: 'red', count: 2 }, { type: 'yellow', count: 1 }],
            coins: 3,
            borderColor: '#0047AB'
        };

        // Library State
        let library = [];

        // RENDER HELPERS
        function getReqRowsHTML(gray, colors) {
            let html = '';
            if (gray > 0) html += createReqRow('gray', gray);
            colors.forEach(c => html += createReqRow(c.type, c.count));
            return html;
        }

        function createReqRow(color, count) {
            return `
            <div class="req-row">
                <div class="cube cube-${color}"></div>
                <span class="text-xs text-gray-400 mx-2">x</span>
                <span class="text-xl font-bold font-mono">${count}</span>
            </div>`;
        }

        function getCardHTML(data) {
            // Apply custom border color inline for print preservation
            const maiolicaStyle = `border-color: ${data.borderColor}; background-image: linear-gradient(45deg, ${data.borderColor} 25%, transparent 25%, transparent 75%, ${data.borderColor} 75%, ${data.borderColor}), linear-gradient(45deg, ${data.borderColor} 25%, transparent 25%, transparent 75%, ${data.borderColor} 75%, ${data.borderColor});`;

            return `
            <div class="card-white-border transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl">
                <div class="maiolica-border" style="${maiolicaStyle}">
                    <div class="card-inner-box">
                         <!-- LEFT -->
                         <div class="section-left">
                             <div class="text-xs font-bold text-gray-400 uppercase tracking-tight mb-2 text-center w-full">Richiesto</div>
                             <div class="flex flex-col gap-1 w-full pl-2">
                                 ${getReqRowsHTML(data.gray, data.colors)}
                             </div>
                             <div class="mt-auto pt-3 border-t-2 border-dotted border-gray-300 w-full text-center">
                                 <div class="text-[10px] uppercase text-gray-400 font-bold mb-0">Valore</div>
                                 <div class="coin-reward">
                                     <span>${data.coins}</span> <span class="text-2xl">üí∞</span>
                                 </div>
                             </div>
                         </div>
                         <!-- RIGHT -->
                         <div class="section-right">
                             <div class="absolute inset-0 opacity-[0.03]" style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIiBmaWxsPSIjMDA0N0FCIj48cGF0aCBkPSJNMjAgMEwyMCA0ME0wIDIwTDQwIDIweiIvPjwvc3ZnPg==')"></div>
                             <img src="${data.img}" class="artwork-img relative z-10 rounded-sm" onerror="this.onerror=null; this.src='https://via.placeholder.com/300?text=IMG+NOT+FOUND';">
                         </div>
                    </div>
                </div>
            </div>`;
        }

        // MAIN RENDER
        function render() {
            // Render Editor List
            const listDiv = document.getElementById('color-reqs-container');
            listDiv.innerHTML = '';
            state.colors.forEach((c, idx) => {
                listDiv.innerHTML += `
                 <div class="flex items-center justify-between mb-2 bg-white p-2 border rounded shadow-sm hover:border-blue-300 transition-colors">
                    <div class="flex items-center gap-2">
                        <div class="cube cube-${c.type}"></div>
                        <span class="capitalize text-sm font-medium text-gray-700">${c.type}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-400">Qt.</span>
                        <input type="number" value="${c.count}" min="1" class="w-12 p-1 border rounded text-center text-sm font-bold" onchange="updateColorCount(${idx}, this.value)">
                        <button onclick="removeColor(${idx})" class="w-6 h-6 flex items-center justify-center rounded-full text-gray-400 hover:text-white hover:bg-red-500 font-bold transition-all ml-1">√ó</button>
                    </div>
                </div>`;
            });

            // Update Input Fields logic...
            document.getElementById('req-gray').value = state.gray;
            document.getElementById('reward-coins').value = state.coins;

            // Update Root Var for Editor Preview
            document.documentElement.style.setProperty('--vietri-blue', state.borderColor);

            // Render Preview Card
            document.getElementById('preview-container').innerHTML = getCardHTML(state);

            // Library Count
            document.getElementById('lib-count').innerText = library.length;
        }

        // LIBRARY FUNCTIONS
        function addToLibrary() {
            // Deep copy state
            const card = JSON.parse(JSON.stringify(state));
            card.id = Date.now();
            library.push(card);
            renderLibraryList();
            // Flash feedback
            const btn = document.querySelector('button[onclick="addToLibrary()"]');
            const old = btn.innerHTML;
            btn.innerHTML = "‚úÖ Salvato!";
            setTimeout(() => btn.innerHTML = old, 1000);
        }

        function removeFromLibrary(idx) {
            library.splice(idx, 1);
            renderLibraryList();
        }

        function loadFromLibrary(idx) {
            const card = library[idx];
            state.img = card.img; // Default to saved value
            state.gray = card.gray;
            state.colors = JSON.parse(JSON.stringify(card.colors)); // copy
            state.coins = card.coins;
            state.borderColor = card.borderColor || '#0047AB';

            // Resolve image URL from select options (bridge between saved name and Vite hashed URL)
            const select = document.getElementById('img-select');
            let found = false;
            if (select && select.options.length > 0) {
                for (let i = 0; i < select.options.length; i++) {
                    // Match against the saved value OR the filename (e.g. "OP_VASO.png")
                    const optVal = select.options[i].value;
                    const optText = select.options[i].text;
                    const savedName = card.img.split('/').pop();

                    if (optVal === card.img || optText === savedName) {
                        select.selectedIndex = i;
                        state.img = optVal; // Update state to the working URL
                        found = true;
                        break;
                    }
                }
            }

            if (!found) {
                // Keep state.img as is (maybe it's a custom URL or preview.png)
                // Optionally reset select if we want
                select.value = 'preview.png';
            }

            document.getElementById('custom-img').value = card.img;
            document.getElementById('border-color-picker').value = state.borderColor;

            render();
        }

        function renderLibraryList() {
            const el = document.getElementById('library-list');
            if (library.length === 0) {
                el.innerHTML = '<p class="text-gray-400 text-center text-xs italic">Nessuna carta salvata</p>';
                return;
            }
            el.innerHTML = '';
            library.forEach((card, idx) => {
                const displayName = card.img.split('/').pop();
                el.innerHTML += `
                <div class="flex items-center justify-between bg-blue-50 p-1 rounded border border-blue-100 mb-1">
                    <div class="flex items-center gap-2 overflow-hidden">
                        <div class="w-4 h-4 rounded-full border border-black/10" style="background:${card.borderColor}"></div>
                        <span class="text-xs truncate max-w-[100px] font-bold text-blue-900">${displayName}</span>
                    </div>
                    <div class="flex gap-1">
                        <button onclick="loadFromLibrary(${idx})" class="text-[10px] bg-white border border-gray-300 px-1 rounded hover:bg-gray-100" title="Carica">‚úèÔ∏è</button>
                        <button onclick="removeFromLibrary(${idx})" class="text-[10px] bg-red-100 text-red-600 border border-red-200 px-1 rounded hover:bg-red-200" title="Elimina">üóëÔ∏è</button>
                    </div>
                </div>`;
            });
            document.getElementById('lib-count').innerText = library.length;
        }

        function printLibrary() {
            if (library.length === 0) {
                alert("La libreria √® vuota! Aggiungi prima delle carte.");
                return;
            }
            // Populate Print Area
            const pa = document.getElementById('print-area');
            pa.innerHTML = '';
            library.forEach(card => {
                pa.innerHTML += getCardHTML(card);
            });
            window.print();
        }

        // ACTIONS
        function updateImg(val) { state.img = val; render(); }
        function updateGray(val) { state.gray = parseInt(val); render(); }
        function updateCoins(val) { state.coins = parseInt(val); render(); }
        function updateBorderColor(val) { state.borderColor = val; render(); }

        function addColorReq() {
            const type = document.getElementById('add-color-select').value;
            const existing = state.colors.find(c => c.type === type);
            if (existing) existing.count++;
            else state.colors.push({ type, count: 1 });
            render();
        }
        function updateColorCount(idx, val) {
            state.colors[idx].count = parseInt(val);
            render();
        }
        function removeColor(idx) { state.colors.splice(idx, 1); render(); }

        function exportConfig() {
            const json = JSON.stringify(state, null, 2);
            navigator.clipboard.writeText(json).then(() => alert('Configurazione JSON copiata negli appunti!'));
        }

        // LISTENERS
        document.getElementById('img-select').addEventListener('change', (e) => updateImg(e.target.value));
        document.getElementById('custom-img').addEventListener('input', (e) => {
            if (e.target.value) updateImg(e.target.value);
            else updateImg(document.getElementById('img-select').value);
        });
        document.getElementById('req-gray').addEventListener('input', (e) => updateGray(e.target.value));
        document.getElementById('reward-coins').addEventListener('input', (e) => updateCoins(e.target.value));
        const bcp = document.getElementById('border-color-picker');
        if (bcp) bcp.addEventListener('input', (e) => updateBorderColor(e.target.value));

        // INIT
        render();
        renderLibraryList();
    </script>


</body>

</html>